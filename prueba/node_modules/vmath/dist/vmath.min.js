var vmath=function(m){"use strict";var t=Math.PI/180;var r=180/Math.PI;var a=1e-6;function n(m,t){return Math.abs(m-t)<=a*Math.max(1,Math.abs(m),Math.abs(t))}function u(m,t,r){r=r||a;return Math.abs(m-t)<=r}function e(m,t,r){return m<t?t:m>r?r:m}function i(m){return m<0?0:m>1?1:m}function o(m,t,r){return m+(t-m)*r}function s(m){return m*t}function h(m){return m*r}var c=Math.random;function f(m,t){return Math.random()*(t-m)+m}function M(m,t){return Math.floor(f(m,t))}function x(m){--m;m=m>>1|m;m=m>>2|m;m=m>>4|m;m=m>>8|m;m=m>>16|m;++m;return m}var y=32;var v=2147483647;var l=-1<<y-1;function b(m){return(m>0)-(m<0)}function z(m){var t=m>>y-1;return(m^t)-t}function w(m,t){return t^(m^t)&-(m<t)}function d(m,t){return m^(m^t)&-(m<t)}function p(m){return!(m&m-1)&&!!m}function g(m){var t,r;t=(m>65535)<<4;m>>>=t;r=(m>255)<<3;m>>>=r;t|=r;r=(m>15)<<2;m>>>=r;t|=r;r=(m>3)<<1;m>>>=r;t|=r;return t|m>>1}function q(m){return m>=1e9?9:m>=1e8?8:m>=1e7?7:m>=1e6?6:m>=1e5?5:m>=1e4?4:m>=1e3?3:m>=100?2:m>=10?1:0}function A(m){m=m-(m>>>1&1431655765);m=(m&858993459)+(m>>>2&858993459);return(m+(m>>>4)&252645135)*16843009>>>24}function S(m){var t=32;m&=-m;if(m){t--}if(m&65535){t-=16}if(m&16711935){t-=8}if(m&252645135){t-=4}if(m&858993459){t-=2}if(m&1431655765){t-=1}return t}function I(m){m+=m===0;--m;m|=m>>>1;m|=m>>>2;m|=m>>>4;m|=m>>>8;m|=m>>>16;return m+1}function L(m){m|=m>>>1;m|=m>>>2;m|=m>>>4;m|=m>>>8;m|=m>>>16;return m-(m>>>1)}function E(m){m^=m>>>16;m^=m>>>8;m^=m>>>4;m&=15;return 27030>>>m&1}var P=new Array(256);(function(m){for(var t=0;t<256;++t){var r=t,a=t,n=7;for(r>>>=1;r;r>>>=1){a<<=1;a|=r&1;--n}m[t]=a<<n&255}})(P);function D(m){return P[m&255]<<24|P[m>>>8&255]<<16|P[m>>>16&255]<<8|P[m>>>24&255]}function N(m,t){m&=65535;m=(m|m<<8)&16711935;m=(m|m<<4)&252645135;m=(m|m<<2)&858993459;m=(m|m<<1)&1431655765;t&=65535;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return m|t<<1}function R(m,t){m=m>>>t&1431655765;m=(m|m>>>1)&858993459;m=(m|m>>>2)&252645135;m=(m|m>>>4)&16711935;m=(m|m>>>16)&65535;return m<<16>>16}function O(m,t,r){m&=1023;m=(m|m<<16)&4278190335;m=(m|m<<8)&251719695;m=(m|m<<4)&3272356035;m=(m|m<<2)&1227133513;t&=1023;t=(t|t<<16)&4278190335;t=(t|t<<8)&251719695;t=(t|t<<4)&3272356035;t=(t|t<<2)&1227133513;m|=t<<1;r&=1023;r=(r|r<<16)&4278190335;r=(r|r<<8)&251719695;r=(r|r<<4)&3272356035;r=(r|r<<2)&1227133513;return m|r<<2}function T(m,t){m=m>>>t&1227133513;m=(m|m>>>2)&3272356035;m=(m|m>>>4)&251719695;m=(m|m>>>8)&4278190335;m=(m|m>>>16)&1023;return m<<22>>22}function J(m){var t=m|m-1;return t+1|(~t&-~t)-1>>>S(m)+1}var j=Object.freeze({INT_BITS:y,INT_MAX:v,INT_MIN:l,sign:b,abs:z,min:w,max:d,isPow2:p,log2:g,log10:q,popCount:A,countTrailingZeros:S,nextPow2:I,prevPow2:L,parity:E,reverse:D,interleave2:N,deinterleave2:R,interleave3:O,deinterleave3:T,nextCombination:J});var Q=new Array(2);var X=function m(t,r){this.x=t;this.y=r};X.prototype.toJSON=function m(){Q[0]=this.x;Q[1]=this.y;return Q};var Z={};Z.create=function(){return new X(0,0)};Z.new=function(m,t){return new X(m,t)};Z.clone=function(m){return new X(m.x,m.y)};Z.copy=function(m,t){m.x=t.x;m.y=t.y;return m};Z.set=function(m,t,r){m.x=t;m.y=r;return m};Z.add=function(m,t,r){m.x=t.x+r.x;m.y=t.y+r.y;return m};Z.subtract=function(m,t,r){m.x=t.x-r.x;m.y=t.y-r.y;return m};Z.sub=Z.subtract;Z.multiply=function(m,t,r){m.x=t.x*r.x;m.y=t.y*r.y;return m};Z.mul=Z.multiply;Z.divide=function(m,t,r){m.x=t.x/r.x;m.y=t.y/r.y;return m};Z.div=Z.divide;Z.ceil=function(m,t){m.x=Math.ceil(t.x);m.y=Math.ceil(t.y);return m};Z.floor=function(m,t){m.x=Math.floor(t.x);m.y=Math.floor(t.y);return m};Z.min=function(m,t,r){m.x=Math.min(t.x,r.x);m.y=Math.min(t.y,r.y);return m};Z.max=function(m,t,r){m.x=Math.max(t.x,r.x);m.y=Math.max(t.y,r.y);return m};Z.round=function(m,t){m.x=Math.round(t.x);m.y=Math.round(t.y);return m};Z.scale=function(m,t,r){m.x=t.x*r;m.y=t.y*r;return m};Z.scaleAndAdd=function(m,t,r,a){m.x=t.x+r.x*a;m.y=t.y+r.y*a;return m};Z.distance=function(m,t){var r=t.x-m.x,a=t.y-m.y;return Math.sqrt(r*r+a*a)};Z.dist=Z.distance;Z.squaredDistance=function(m,t){var r=t.x-m.x,a=t.y-m.y;return r*r+a*a};Z.sqrDist=Z.squaredDistance;Z.length=function(m){var t=m.x,r=m.y;return Math.sqrt(t*t+r*r)};Z.len=Z.length;Z.squaredLength=function(m){var t=m.x,r=m.y;return t*t+r*r};Z.sqrLen=Z.squaredLength;Z.negate=function(m,t){m.x=-t.x;m.y=-t.y;return m};Z.inverse=function(m,t){m.x=1/t.x;m.y=1/t.y;return m};Z.inverseSafe=function(m,t){var r=t.x,n=t.y;if(Math.abs(r)<a){m.x=0}else{m.x=1/r}if(Math.abs(n)<a){m.y=0}else{m.y=1/t.y}return m};Z.normalize=function(m,t){var r=t.x,a=t.y;var n=r*r+a*a;if(n>0){n=1/Math.sqrt(n);m.x=t.x*n;m.y=t.y*n}return m};Z.dot=function(m,t){return m.x*t.x+m.y*t.y};Z.cross=function(m,t,r){var a=t.x*r.y-t.y*r.x;m.x=m.y=0;m.z=a;return m};Z.lerp=function(m,t,r,a){var n=t.x,u=t.y;m.x=n+a*(r.x-n);m.y=u+a*(r.y-u);return m};Z.random=function(m,t){t=t||1;var r=c()*2*Math.PI;m.x=Math.cos(r)*t;m.y=Math.sin(r)*t;return m};Z.transformMat2=function(m,t,r){var a=t.x,n=t.y;m.x=r.m00*a+r.m02*n;m.y=r.m01*a+r.m03*n;return m};Z.transformMat23=function(m,t,r){var a=t.x,n=t.y;m.x=r.m00*a+r.m02*n+r.m04;m.y=r.m01*a+r.m03*n+r.m05;return m};Z.transformMat3=function(m,t,r){var a=t.x,n=t.y;m.x=r.m00*a+r.m03*n+r.m06;m.y=r.m01*a+r.m04*n+r.m07;return m};Z.transformMat4=function(m,t,r){var a=t.x,n=t.y;m.x=r.m00*a+r.m04*n+r.m12;m.y=r.m01*a+r.m05*n+r.m13;return m};Z.forEach=function(){var m=Z.create();return function(t,r,a,n,u,e){var i,o;if(!r){r=2}if(!a){a=0}if(n){o=Math.min(n*r+a,t.length)}else{o=t.length}for(i=a;i<o;i+=r){m.x=t[i];m.y=t[i+1];u(m,m,e);t[i]=m.x;t[i+1]=m.y}return t}}();Z.str=function(m){return"vec2("+m.x+", "+m.y+")"};Z.array=function(m,t){m[0]=t.x;m[1]=t.y;return m};Z.exactEquals=function(m,t){return m.x===t.x&&m.y===t.y};Z.equals=function(m,t){var r=m.x,n=m.y;var u=t.x,e=t.y;return Math.abs(r-u)<=a*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-e)<=a*Math.max(1,Math.abs(n),Math.abs(e))};var U=new Array(3);var V=function m(t,r,a){this.x=t;this.y=r;this.z=a};V.prototype.toJSON=function m(){U[0]=this.x;U[1]=this.y;U[2]=this.z;return U};var Y={};Y.create=function(){return new V(0,0,0)};Y.new=function(m,t,r){return new V(m,t,r)};Y.clone=function(m){return new V(m.x,m.y,m.z)};Y.copy=function(m,t){m.x=t.x;m.y=t.y;m.z=t.z;return m};Y.set=function(m,t,r,a){m.x=t;m.y=r;m.z=a;return m};Y.add=function(m,t,r){m.x=t.x+r.x;m.y=t.y+r.y;m.z=t.z+r.z;return m};Y.subtract=function(m,t,r){m.x=t.x-r.x;m.y=t.y-r.y;m.z=t.z-r.z;return m};Y.sub=Y.subtract;Y.multiply=function(m,t,r){m.x=t.x*r.x;m.y=t.y*r.y;m.z=t.z*r.z;return m};Y.mul=Y.multiply;Y.divide=function(m,t,r){m.x=t.x/r.x;m.y=t.y/r.y;m.z=t.z/r.z;return m};Y.div=Y.divide;Y.ceil=function(m,t){m.x=Math.ceil(t.x);m.y=Math.ceil(t.y);m.z=Math.ceil(t.z);return m};Y.floor=function(m,t){m.x=Math.floor(t.x);m.y=Math.floor(t.y);m.z=Math.floor(t.z);return m};Y.min=function(m,t,r){m.x=Math.min(t.x,r.x);m.y=Math.min(t.y,r.y);m.z=Math.min(t.z,r.z);return m};Y.max=function(m,t,r){m.x=Math.max(t.x,r.x);m.y=Math.max(t.y,r.y);m.z=Math.max(t.z,r.z);return m};Y.round=function(m,t){m.x=Math.round(t.x);m.y=Math.round(t.y);m.z=Math.round(t.z);return m};Y.scale=function(m,t,r){m.x=t.x*r;m.y=t.y*r;m.z=t.z*r;return m};Y.scaleAndAdd=function(m,t,r,a){m.x=t.x+r.x*a;m.y=t.y+r.y*a;m.z=t.z+r.z*a;return m};Y.distance=function(m,t){var r=t.x-m.x,a=t.y-m.y,n=t.z-m.z;return Math.sqrt(r*r+a*a+n*n)};Y.dist=Y.distance;Y.squaredDistance=function(m,t){var r=t.x-m.x,a=t.y-m.y,n=t.z-m.z;return r*r+a*a+n*n};Y.sqrDist=Y.squaredDistance;Y.length=function(m){var t=m.x,r=m.y,a=m.z;return Math.sqrt(t*t+r*r+a*a)};Y.len=Y.length;Y.squaredLength=function(m){var t=m.x,r=m.y,a=m.z;return t*t+r*r+a*a};Y.sqrLen=Y.squaredLength;Y.negate=function(m,t){m.x=-t.x;m.y=-t.y;m.z=-t.z;return m};Y.inverse=function(m,t){m.x=1/t.x;m.y=1/t.y;m.z=1/t.z;return m};Y.inverseSafe=function(m,t){var r=t.x,n=t.y,u=t.z;if(Math.abs(r)<a){m.x=0}else{m.x=1/r}if(Math.abs(n)<a){m.y=0}else{m.y=1/n}if(Math.abs(u)<a){m.z=0}else{m.z=1/u}return m};Y.normalize=function(m,t){var r=t.x,a=t.y,n=t.z;var u=r*r+a*a+n*n;if(u>0){u=1/Math.sqrt(u);m.x=r*u;m.y=a*u;m.z=n*u}return m};Y.dot=function(m,t){return m.x*t.x+m.y*t.y+m.z*t.z};Y.cross=function(m,t,r){var a=t.x,n=t.y,u=t.z,e=r.x,i=r.y,o=r.z;m.x=n*o-u*i;m.y=u*e-a*o;m.z=a*i-n*e;return m};Y.lerp=function(m,t,r,a){var n=t.x,u=t.y,e=t.z;m.x=n+a*(r.x-n);m.y=u+a*(r.y-u);m.z=e+a*(r.z-e);return m};Y.hermite=function(m,t,r,a,n,u){var e=u*u,i=e*(2*u-3)+1,o=e*(u-2)+u,s=e*(u-1),h=e*(3-2*u);m.x=t.x*i+r.x*o+a.x*s+n.x*h;m.y=t.y*i+r.y*o+a.y*s+n.y*h;m.z=t.z*i+r.z*o+a.z*s+n.z*h;return m};Y.bezier=function(m,t,r,a,n,u){var e=1-u,i=e*e,o=u*u,s=i*e,h=3*u*i,c=3*o*e,f=o*u;m.x=t.x*s+r.x*h+a.x*c+n.x*f;m.y=t.y*s+r.y*h+a.y*c+n.y*f;m.z=t.z*s+r.z*h+a.z*c+n.z*f;return m};Y.random=function(m,t){t=t||1;var r=c()*2*Math.PI;var a=c()*2-1;var n=Math.sqrt(1-a*a)*t;m.x=Math.cos(r)*n;m.y=Math.sin(r)*n;m.z=a*t;return m};Y.transformMat4=function(m,t,r){var a=t.x,n=t.y,u=t.z,e=r.m03*a+r.m07*n+r.m11*u+r.m15;e=e||1;m.x=(r.m00*a+r.m04*n+r.m08*u+r.m12)/e;m.y=(r.m01*a+r.m05*n+r.m09*u+r.m13)/e;m.z=(r.m02*a+r.m06*n+r.m10*u+r.m14)/e;return m};Y.transformMat3=function(m,t,r){var a=t.x,n=t.y,u=t.z;m.x=a*r.m00+n*r.m03+u*r.m06;m.y=a*r.m01+n*r.m04+u*r.m07;m.z=a*r.m02+n*r.m05+u*r.m08;return m};Y.transformQuat=function(m,t,r){var a=t.x,n=t.y,u=t.z;var e=r.x,i=r.y,o=r.z,s=r.w;var h=s*a+i*u-o*n;var c=s*n+o*a-e*u;var f=s*u+e*n-i*a;var M=-e*a-i*n-o*u;m.x=h*s+M*-e+c*-o-f*-i;m.y=c*s+M*-i+f*-e-h*-o;m.z=f*s+M*-o+h*-i-c*-e;return m};Y.rotateX=function(m,t,r,a){var n=[],u=[];n.x=t.x-r.x;n.y=t.y-r.y;n.z=t.z-r.z;u.x=n.x;u.y=n.y*Math.cos(a)-n.z*Math.sin(a);u.z=n.y*Math.sin(a)+n.z*Math.cos(a);m.x=u.x+r.x;m.y=u.y+r.y;m.z=u.z+r.z;return m};Y.rotateY=function(m,t,r,a){var n=[],u=[];n.x=t.x-r.x;n.y=t.y-r.y;n.z=t.z-r.z;u.x=n.z*Math.sin(a)+n.x*Math.cos(a);u.y=n.y;u.z=n.z*Math.cos(a)-n.x*Math.sin(a);m.x=u.x+r.x;m.y=u.y+r.y;m.z=u.z+r.z;return m};Y.rotateZ=function(m,t,r,a){var n=[],u=[];n.x=t.x-r.x;n.y=t.y-r.y;n.z=t.z-r.z;u.x=n.x*Math.cos(a)-n.y*Math.sin(a);u.y=n.x*Math.sin(a)+n.y*Math.cos(a);u.z=n.z;m.x=u.x+r.x;m.y=u.y+r.y;m.z=u.z+r.z;return m};Y.forEach=function(){var m=Y.create();return function(t,r,a,n,u,e){var i,o;if(!r){r=3}if(!a){a=0}if(n){o=Math.min(n*r+a,t.length)}else{o=t.length}for(i=a;i<o;i+=r){m.x=t[i];m.y=t[i+1];m.z=t[i+2];u(m,m,e);t[i]=m.x;t[i+1]=m.y;t[i+2]=m.z}return t}}();Y.angle=function(){var m=Y.create();var t=Y.create();return function(r,a){Y.copy(m,r);Y.copy(t,a);Y.normalize(m,m);Y.normalize(t,t);var n=Y.dot(m,t);if(n>1){return 0}if(n<-1){return Math.PI}return Math.acos(n)}}();Y.str=function(m){return"vec3("+m.x+", "+m.y+", "+m.z+")"};Y.array=function(m,t){m[0]=t.x;m[1]=t.y;m[2]=t.z;return m};Y.exactEquals=function(m,t){return m.x===t.x&&m.y===t.y&&m.z===t.z};Y.equals=function(m,t){var r=m.x,n=m.y,u=m.z;var e=t.x,i=t.y,o=t.z;return Math.abs(r-e)<=a*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(n-i)<=a*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(u-o)<=a*Math.max(1,Math.abs(u),Math.abs(o))};var F=new Array(4);var _=function m(t,r,a,n){this.x=t;this.y=r;this.z=a;this.w=n};_.prototype.toJSON=function m(){F[0]=this.x;F[1]=this.y;F[2]=this.z;F[3]=this.w;return F};var C={};C.create=function(){return new _(0,0,0,0)};C.new=function(m,t,r,a){return new _(m,t,r,a)};C.clone=function(m){return new _(m.x,m.y,m.z,m.w)};C.copy=function(m,t){m.x=t.x;m.y=t.y;m.z=t.z;m.w=t.w;return m};C.set=function(m,t,r,a,n){m.x=t;m.y=r;m.z=a;m.w=n;return m};C.add=function(m,t,r){m.x=t.x+r.x;m.y=t.y+r.y;m.z=t.z+r.z;m.w=t.w+r.w;return m};C.subtract=function(m,t,r){m.x=t.x-r.x;m.y=t.y-r.y;m.z=t.z-r.z;m.w=t.w-r.w;return m};C.sub=C.subtract;C.multiply=function(m,t,r){m.x=t.x*r.x;m.y=t.y*r.y;m.z=t.z*r.z;m.w=t.w*r.w;return m};C.mul=C.multiply;C.divide=function(m,t,r){m.x=t.x/r.x;m.y=t.y/r.y;m.z=t.z/r.z;m.w=t.w/r.w;return m};C.div=C.divide;C.ceil=function(m,t){m.x=Math.ceil(t.x);m.y=Math.ceil(t.y);m.z=Math.ceil(t.z);m.w=Math.ceil(t.w);return m};C.floor=function(m,t){m.x=Math.floor(t.x);m.y=Math.floor(t.y);m.z=Math.floor(t.z);m.w=Math.floor(t.w);return m};C.min=function(m,t,r){m.x=Math.min(t.x,r.x);m.y=Math.min(t.y,r.y);m.z=Math.min(t.z,r.z);m.w=Math.min(t.w,r.w);return m};C.max=function(m,t,r){m.x=Math.max(t.x,r.x);m.y=Math.max(t.y,r.y);m.z=Math.max(t.z,r.z);m.w=Math.max(t.w,r.w);return m};C.round=function(m,t){m.x=Math.round(t.x);m.y=Math.round(t.y);m.z=Math.round(t.z);m.w=Math.round(t.w);return m};C.scale=function(m,t,r){m.x=t.x*r;m.y=t.y*r;m.z=t.z*r;m.w=t.w*r;return m};C.scaleAndAdd=function(m,t,r,a){m.x=t.x+r.x*a;m.y=t.y+r.y*a;m.z=t.z+r.z*a;m.w=t.w+r.w*a;return m};C.distance=function(m,t){var r=t.x-m.x,a=t.y-m.y,n=t.z-m.z,u=t.w-m.w;return Math.sqrt(r*r+a*a+n*n+u*u)};C.dist=C.distance;C.squaredDistance=function(m,t){var r=t.x-m.x,a=t.y-m.y,n=t.z-m.z,u=t.w-m.w;return r*r+a*a+n*n+u*u};C.sqrDist=C.squaredDistance;C.length=function(m){var t=m.x,r=m.y,a=m.z,n=m.w;return Math.sqrt(t*t+r*r+a*a+n*n)};C.len=C.length;C.squaredLength=function(m){var t=m.x,r=m.y,a=m.z,n=m.w;return t*t+r*r+a*a+n*n};C.sqrLen=C.squaredLength;C.negate=function(m,t){m.x=-t.x;m.y=-t.y;m.z=-t.z;m.w=-t.w;return m};C.inverse=function(m,t){m.x=1/t.x;m.y=1/t.y;m.z=1/t.z;m.w=1/t.w;return m};C.inverseSafe=function(m,t){var r=t.x,n=t.y,u=t.z,e=t.w;if(Math.abs(r)<a){m.x=0}else{m.x=1/r}if(Math.abs(n)<a){m.y=0}else{m.y=1/n}if(Math.abs(u)<a){m.z=0}else{m.z=1/u}if(Math.abs(e)<a){m.w=0}else{m.w=1/e}return m};C.normalize=function(m,t){var r=t.x,a=t.y,n=t.z,u=t.w;var e=r*r+a*a+n*n+u*u;if(e>0){e=1/Math.sqrt(e);m.x=r*e;m.y=a*e;m.z=n*e;m.w=u*e}return m};C.dot=function(m,t){return m.x*t.x+m.y*t.y+m.z*t.z+m.w*t.w};C.lerp=function(m,t,r,a){var n=t.x,u=t.y,e=t.z,i=t.w;m.x=n+a*(r.x-n);m.y=u+a*(r.y-u);m.z=e+a*(r.z-e);m.w=i+a*(r.w-i);return m};C.random=function(m,t){t=t||1;m.x=c();m.y=c();m.z=c();m.w=c();C.normalize(m,m);C.scale(m,m,t);return m};C.transformMat4=function(m,t,r){var a=t.x,n=t.y,u=t.z,e=t.w;m.x=r.m00*a+r.m04*n+r.m08*u+r.m12*e;m.y=r.m01*a+r.m05*n+r.m09*u+r.m13*e;m.z=r.m02*a+r.m06*n+r.m10*u+r.m14*e;m.w=r.m03*a+r.m07*n+r.m11*u+r.m15*e;return m};C.transformQuat=function(m,t,r){var a=t.x,n=t.y,u=t.z;var e=r.x,i=r.y,o=r.z,s=r.w;var h=s*a+i*u-o*n;var c=s*n+o*a-e*u;var f=s*u+e*n-i*a;var M=-e*a-i*n-o*u;m.x=h*s+M*-e+c*-o-f*-i;m.y=c*s+M*-i+f*-e-h*-o;m.z=f*s+M*-o+h*-i-c*-e;m.w=t.w;return m};C.forEach=function(){var m=C.create();return function(t,r,a,n,u,e){var i,o;if(!r){r=4}if(!a){a=0}if(n){o=Math.min(n*r+a,t.length)}else{o=t.length}for(i=a;i<o;i+=r){m.x=t[i];m.y=t[i+1];m.z=t[i+2];m.w=t[i+3];u(m,m,e);t[i]=m.x;t[i+1]=m.y;t[i+2]=m.z;t[i+3]=m.w}return t}}();C.str=function(m){return"vec4("+m.x+", "+m.y+", "+m.z+", "+m.w+")"};C.array=function(m,t){m[0]=t.x;m[1]=t.y;m[2]=t.z;m[3]=t.w;return m};C.exactEquals=function(m,t){return m.x===t.x&&m.y===t.y&&m.z===t.z&&m.w===t.w};C.equals=function(m,t){var r=m.x,n=m.y,u=m.z,e=m.w;var i=t.x,o=t.y,s=t.z,h=t.w;return Math.abs(r-i)<=a*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=a*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(u-s)<=a*Math.max(1,Math.abs(u),Math.abs(s))&&Math.abs(e-h)<=a*Math.max(1,Math.abs(e),Math.abs(h))};var H=new Array(9);var k=function m(t,r,a,n,u,e,i,o,s){this.m00=t;this.m01=r;this.m02=a;this.m03=n;this.m04=u;this.m05=e;this.m06=i;this.m07=o;this.m08=s};k.prototype.toJSON=function m(){H[0]=this.m00;H[1]=this.m01;H[2]=this.m02;H[3]=this.m03;H[4]=this.m04;H[5]=this.m05;H[6]=this.m06;H[7]=this.m07;H[8]=this.m08;return H};var B={};B.create=function(){return new k(1,0,0,0,1,0,0,0,1)};B.new=function(m,t,r,a,n,u,e,i,o){return new k(m,t,r,a,n,u,e,i,o)};B.clone=function(m){return new k(m.m00,m.m01,m.m02,m.m03,m.m04,m.m05,m.m06,m.m07,m.m08)};B.copy=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m03;m.m04=t.m04;m.m05=t.m05;m.m06=t.m06;m.m07=t.m07;m.m08=t.m08;return m};B.set=function(m,t,r,a,n,u,e,i,o,s){m.m00=t;m.m01=r;m.m02=a;m.m03=n;m.m04=u;m.m05=e;m.m06=i;m.m07=o;m.m08=s;return m};B.identity=function(m){m.m00=1;m.m01=0;m.m02=0;m.m03=0;m.m04=1;m.m05=0;m.m06=0;m.m07=0;m.m08=1;return m};B.transpose=function(m,t){if(m===t){var r=t.m01,a=t.m02,n=t.m05;m.m01=t.m03;m.m02=t.m06;m.m03=r;m.m05=t.m07;m.m06=a;m.m07=n}else{m.m00=t.m00;m.m01=t.m03;m.m02=t.m06;m.m03=t.m01;m.m04=t.m04;m.m05=t.m07;m.m06=t.m02;m.m07=t.m05;m.m08=t.m08}return m};B.invert=function(m,t){var r=t.m00,a=t.m01,n=t.m02,u=t.m03,e=t.m04,i=t.m05,o=t.m06,s=t.m07,h=t.m08;var c=h*e-i*s;var f=-h*u+i*o;var M=s*u-e*o;var x=r*c+a*f+n*M;if(!x){return null}x=1/x;m.m00=c*x;m.m01=(-h*a+n*s)*x;m.m02=(i*a-n*e)*x;m.m03=f*x;m.m04=(h*r-n*o)*x;m.m05=(-i*r+n*u)*x;m.m06=M*x;m.m07=(-s*r+a*o)*x;m.m08=(e*r-a*u)*x;return m};B.adjoint=function(m,t){var r=t.m00,a=t.m01,n=t.m02,u=t.m03,e=t.m04,i=t.m05,o=t.m06,s=t.m07,h=t.m08;m.m00=e*h-i*s;m.m01=n*s-a*h;m.m02=a*i-n*e;m.m03=i*o-u*h;m.m04=r*h-n*o;m.m05=n*u-r*i;m.m06=u*s-e*o;m.m07=a*o-r*s;m.m08=r*e-a*u;return m};B.determinant=function(m){var t=m.m00,r=m.m01,a=m.m02,n=m.m03,u=m.m04,e=m.m05,i=m.m06,o=m.m07,s=m.m08;return t*(s*u-e*o)+r*(-s*n+e*i)+a*(o*n-u*i)};B.multiply=function(m,t,r){var a=t.m00,n=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=t.m06,h=t.m07,c=t.m08;var f=r.m00,M=r.m01,x=r.m02;var y=r.m03,v=r.m04,l=r.m05;var b=r.m06,z=r.m07,w=r.m08;m.m00=f*a+M*e+x*s;m.m01=f*n+M*i+x*h;m.m02=f*u+M*o+x*c;m.m03=y*a+v*e+l*s;m.m04=y*n+v*i+l*h;m.m05=y*u+v*o+l*c;m.m06=b*a+z*e+w*s;m.m07=b*n+z*i+w*h;m.m08=b*u+z*o+w*c;return m};B.mul=B.multiply;B.translate=function(m,t,r){var a=t.m00,n=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=t.m06,h=t.m07,c=t.m08;var f=r.x,M=r.y;m.m00=a;m.m01=n;m.m02=u;m.m03=e;m.m04=i;m.m05=o;m.m06=f*a+M*e+s;m.m07=f*n+M*i+h;m.m08=f*u+M*o+c;return m};B.rotate=function(m,t,r){var a=t.m00,n=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=t.m06,h=t.m07,c=t.m08;var f=Math.sin(r);var M=Math.cos(r);m.m00=M*a+f*e;m.m01=M*n+f*i;m.m02=M*u+f*o;m.m03=M*e-f*a;m.m04=M*i-f*n;m.m05=M*o-f*u;m.m06=s;m.m07=h;m.m08=c;return m};B.scale=function(m,t,r){var a=r.x,n=r.y;m.m00=a*t.m00;m.m01=a*t.m01;m.m02=a*t.m02;m.m03=n*t.m03;m.m04=n*t.m04;m.m05=n*t.m05;m.m06=t.m06;m.m07=t.m07;m.m08=t.m08;return m};B.fromMat4=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m04;m.m04=t.m05;m.m05=t.m06;m.m06=t.m08;m.m07=t.m09;m.m08=t.m10;return m};B.fromTranslation=function(m,t){m.m00=1;m.m01=0;m.m02=0;m.m03=0;m.m04=1;m.m05=0;m.m06=t.x;m.m07=t.y;m.m08=1;return m};B.fromRotation=function(m,t){var r=Math.sin(t),a=Math.cos(t);m.m00=a;m.m01=r;m.m02=0;m.m03=-r;m.m04=a;m.m05=0;m.m06=0;m.m07=0;m.m08=1;return m};B.fromScaling=function(m,t){m.m00=t.x;m.m01=0;m.m02=0;m.m03=0;m.m04=t.y;m.m05=0;m.m06=0;m.m07=0;m.m08=1;return m};B.fromMat2d=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=0;m.m03=t.m02;m.m04=t.m03;m.m05=0;m.m06=t.m04;m.m07=t.m05;m.m08=1;return m};B.fromQuat=function(m,t){var r=t.x,a=t.y,n=t.z,u=t.w;var e=r+r;var i=a+a;var o=n+n;var s=r*e;var h=a*e;var c=a*i;var f=n*e;var M=n*i;var x=n*o;var y=u*e;var v=u*i;var l=u*o;m.m00=1-c-x;m.m03=h-l;m.m06=f+v;m.m01=h+l;m.m04=1-s-x;m.m07=M-y;m.m02=f-v;m.m05=M+y;m.m08=1-s-c;return m};B.fromViewUp=function(){var m=Y.new(0,1,0);var t=Y.create();var r=Y.create();return function(n,u,e){if(Y.sqrLen(u)<a*a){B.identity(n);return n}e=e||m;Y.cross(t,e,u);if(Y.sqrLen(t)<a*a){B.identity(n);return n}Y.cross(r,u,t);B.set(n,t.x,t.y,t.z,r.x,r.y,r.z,u.x,u.y,u.z);return n}}();B.normalFromMat4=function(m,t){var r=t.m00,a=t.m01,n=t.m02,u=t.m03,e=t.m04,i=t.m05,o=t.m06,s=t.m07,h=t.m08,c=t.m09,f=t.m10,M=t.m11,x=t.m12,y=t.m13,v=t.m14,l=t.m15;var b=r*i-a*e;var z=r*o-n*e;var w=r*s-u*e;var d=a*o-n*i;var p=a*s-u*i;var g=n*s-u*o;var q=h*y-c*x;var A=h*v-f*x;var S=h*l-M*x;var I=c*v-f*y;var L=c*l-M*y;var E=f*l-M*v;var P=b*E-z*L+w*I+d*S-p*A+g*q;if(!P){return null}P=1/P;m.m00=(i*E-o*L+s*I)*P;m.m01=(o*S-e*E-s*A)*P;m.m02=(e*L-i*S+s*q)*P;m.m03=(n*L-a*E-u*I)*P;m.m04=(r*E-n*S+u*A)*P;m.m05=(a*S-r*L-u*q)*P;m.m06=(y*g-v*p+l*d)*P;m.m07=(v*w-x*g-l*z)*P;m.m08=(x*p-y*w+l*b)*P;return m};B.str=function(m){return"mat3("+m.m00+", "+m.m01+", "+m.m02+", "+m.m03+", "+m.m04+", "+m.m05+", "+m.m06+", "+m.m07+", "+m.m08+")"};B.array=function(m,t){m[0]=t.m00;m[1]=t.m01;m[2]=t.m02;m[3]=t.m03;m[4]=t.m04;m[5]=t.m05;m[6]=t.m06;m[7]=t.m07;m[8]=t.m08;return m};B.frob=function(m){return Math.sqrt(Math.pow(m.m00,2)+Math.pow(m.m01,2)+Math.pow(m.m02,2)+Math.pow(m.m03,2)+Math.pow(m.m04,2)+Math.pow(m.m05,2)+Math.pow(m.m06,2)+Math.pow(m.m07,2)+Math.pow(m.m08,2))};B.add=function(m,t,r){m.m00=t.m00+r.m00;m.m01=t.m01+r.m01;m.m02=t.m02+r.m02;m.m03=t.m03+r.m03;m.m04=t.m04+r.m04;m.m05=t.m05+r.m05;m.m06=t.m06+r.m06;m.m07=t.m07+r.m07;m.m08=t.m08+r.m08;return m};B.subtract=function(m,t,r){m.m00=t.m00-r.m00;m.m01=t.m01-r.m01;m.m02=t.m02-r.m02;m.m03=t.m03-r.m03;m.m04=t.m04-r.m04;m.m05=t.m05-r.m05;m.m06=t.m06-r.m06;m.m07=t.m07-r.m07;m.m08=t.m08-r.m08;return m};B.sub=B.subtract;B.multiplyScalar=function(m,t,r){m.m00=t.m00*r;m.m01=t.m01*r;m.m02=t.m02*r;m.m03=t.m03*r;m.m04=t.m04*r;m.m05=t.m05*r;m.m06=t.m06*r;m.m07=t.m07*r;m.m08=t.m08*r;return m};B.multiplyScalarAndAdd=function(m,t,r,a){m.m00=t.m00+r.m00*a;m.m01=t.m01+r.m01*a;m.m02=t.m02+r.m02*a;m.m03=t.m03+r.m03*a;m.m04=t.m04+r.m04*a;m.m05=t.m05+r.m05*a;m.m06=t.m06+r.m06*a;m.m07=t.m07+r.m07*a;m.m08=t.m08+r.m08*a;return m};B.exactEquals=function(m,t){return m.m00===t.m00&&m.m01===t.m01&&m.m02===t.m02&&m.m03===t.m03&&m.m04===t.m04&&m.m05===t.m05&&m.m06===t.m06&&m.m07===t.m07&&m.m08===t.m08};B.equals=function(m,t){var r=m.m00,n=m.m01,u=m.m02,e=m.m03,i=m.m04,o=m.m05,s=m.m06,h=m.m07,c=m.m08;var f=t.m00,M=t.m01,x=t.m02,y=t.m03,v=t.m04,l=t.m05,b=t.m06,z=t.m07,w=t.m08;return Math.abs(r-f)<=a*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-M)<=a*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(u-x)<=a*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(e-y)<=a*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(i-v)<=a*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(o-l)<=a*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(s-b)<=a*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(h-z)<=a*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(c-w)<=a*Math.max(1,Math.abs(c),Math.abs(w))};var W=new Array(4);var G=function m(t,r,a,n){this.x=t;this.y=r;this.z=a;this.w=n};G.prototype.toJSON=function m(){W[0]=this.x;W[1]=this.y;W[2]=this.z;W[3]=this.w;return W};var K={};K.create=function(){return new G(0,0,0,1)};K.new=function(m,t,r,a){return new G(m,t,r,a)};K.clone=function(m){return new G(m.x,m.y,m.z,m.w)};K.copy=C.copy;K.set=C.set;K.identity=function(m){m.x=0;m.y=0;m.z=0;m.w=1;return m};K.rotationTo=function(){var m=Y.create();var t=Y.new(1,0,0);var r=Y.new(0,1,0);return function(a,n,u){var e=Y.dot(n,u);if(e<-.999999){Y.cross(m,t,n);if(Y.length(m)<1e-6){Y.cross(m,r,n)}Y.normalize(m,m);K.fromAxisAngle(a,m,Math.PI);return a}else if(e>.999999){a.x=0;a.y=0;a.z=0;a.w=1;return a}else{Y.cross(m,n,u);a.x=m.x;a.y=m.y;a.z=m.z;a.w=1+e;return K.normalize(a,a)}}}();K.getAxisAngle=function(m,t){var r=Math.acos(t.w)*2;var a=Math.sin(r/2);if(a!=0){m.x=t.x/a;m.y=t.y/a;m.z=t.z/a}else{m.x=1;m.y=0;m.z=0}return r};K.multiply=function(m,t,r){var a=t.x,n=t.y,u=t.z,e=t.w,i=r.x,o=r.y,s=r.z,h=r.w;m.x=a*h+e*i+n*s-u*o;m.y=n*h+e*o+u*i-a*s;m.z=u*h+e*s+a*o-n*i;m.w=e*h-a*i-n*o-u*s;return m};K.mul=K.multiply;K.scale=C.scale;K.rotateX=function(m,t,r){r*=.5;var a=t.x,n=t.y,u=t.z,e=t.w,i=Math.sin(r),o=Math.cos(r);m.x=a*o+e*i;m.y=n*o+u*i;m.z=u*o-n*i;m.w=e*o-a*i;return m};K.rotateY=function(m,t,r){r*=.5;var a=t.x,n=t.y,u=t.z,e=t.w,i=Math.sin(r),o=Math.cos(r);m.x=a*o-u*i;m.y=n*o+e*i;m.z=u*o+a*i;m.w=e*o-n*i;return m};K.rotateZ=function(m,t,r){r*=.5;var a=t.x,n=t.y,u=t.z,e=t.w,i=Math.sin(r),o=Math.cos(r);m.x=a*o+n*i;m.y=n*o-a*i;m.z=u*o+e*i;m.w=e*o-u*i;return m};K.rotateAround=function(){var m=Y.create();var t=K.create();return function(r,a,n,u){K.invert(t,a);Y.transformQuat(m,n,t);K.fromAxisAngle(t,m,u);K.mul(r,a,t);return r}}();K.rotateAroundLocal=function(){var m=K.create();return function(t,r,a,n){K.fromAxisAngle(m,a,n);K.mul(t,r,m);return t}}();K.calculateW=function(m,t){var r=t.x,a=t.y,n=t.z;m.x=r;m.y=a;m.z=n;m.w=Math.sqrt(Math.abs(1-r*r-a*a-n*n));return m};K.dot=C.dot;K.lerp=C.lerp;K.slerp=function(m,t,r,a){var n=t.x,u=t.y,e=t.z,i=t.w,o=r.x,s=r.y,h=r.z,c=r.w;var f,M,x,y,v;M=n*o+u*s+e*h+i*c;if(M<0){M=-M;o=-o;s=-s;h=-h;c=-c}if(1-M>1e-6){f=Math.acos(M);x=Math.sin(f);y=Math.sin((1-a)*f)/x;v=Math.sin(a*f)/x}else{y=1-a;v=a}m.x=y*n+v*o;m.y=y*u+v*s;m.z=y*e+v*h;m.w=y*i+v*c;return m};K.sqlerp=function(){var m=K.create();var t=K.create();return function(r,a,n,u,e,i){K.slerp(m,a,e,i);K.slerp(t,n,u,i);K.slerp(r,m,t,2*i*(1-i));return r}}();K.invert=function(m,t){var r=t.x,a=t.y,n=t.z,u=t.w;var e=r*r+a*a+n*n+u*u;var i=e?1/e:0;m.x=-r*i;m.y=-a*i;m.z=-n*i;m.w=u*i;return m};K.conjugate=function(m,t){m.x=-t.x;m.y=-t.y;m.z=-t.z;m.w=t.w;return m};K.length=C.length;K.len=K.length;K.squaredLength=C.squaredLength;K.sqrLen=K.squaredLength;K.normalize=C.normalize;K.fromAxes=function(){var m=B.create();return function(t,r,a,n){B.set(m,r.x,r.y,r.z,a.x,a.y,a.z,n.x,n.y,n.z);return K.normalize(t,K.fromMat3(t,m))}}();K.fromViewUp=function(){var m=B.create();return function(t,r,a){B.fromViewUp(m,r,a);if(!m){return null}return K.normalize(t,K.fromMat3(t,m))}}();K.fromAxisAngle=function(m,t,r){r=r*.5;var a=Math.sin(r);m.x=a*t.x;m.y=a*t.y;m.z=a*t.z;m.w=Math.cos(r);return m};K.fromMat3=function(m,t){var r=t.m00,a=t.m03,n=t.m06,u=t.m01,e=t.m04,i=t.m07,o=t.m02,s=t.m05,h=t.m08;var c=r+e+h;if(c>0){var f=.5/Math.sqrt(c+1);m.w=.25/f;m.x=(s-i)*f;m.y=(n-o)*f;m.z=(u-a)*f}else if(r>e&&r>h){var M=2*Math.sqrt(1+r-e-h);m.w=(s-i)/M;m.x=.25*M;m.y=(a+u)/M;m.z=(n+o)/M}else if(e>h){var x=2*Math.sqrt(1+e-r-h);m.w=(n-o)/x;m.x=(a+u)/x;m.y=.25*x;m.z=(i+s)/x}else{var y=2*Math.sqrt(1+h-r-e);m.w=(u-a)/y;m.x=(n+o)/y;m.y=(i+s)/y;m.z=.25*y}return m};K.fromEuler=function(m,t,r,a){var n=.5*Math.PI/180;t*=n;r*=n;a*=n;var u=Math.sin(t);var e=Math.cos(t);var i=Math.sin(r);var o=Math.cos(r);var s=Math.sin(a);var h=Math.cos(a);m.x=u*o*h-e*i*s;m.y=e*i*h+u*o*s;m.z=e*o*s-u*i*h;m.w=e*o*h+u*i*s;return m};K.str=function(m){return"quat("+m.x+", "+m.y+", "+m.z+", "+m.w+")"};K.array=function(m,t){m[0]=t.x;m[1]=t.y;m[2]=t.z;m[3]=t.w;return m};K.exactEquals=C.exactEquals;K.equals=C.equals;var $=new Array(4);var mm=function m(t,r,a,n){this.m00=t;this.m01=r;this.m02=a;this.m03=n};mm.prototype.toJSON=function m(){$[0]=this.m00;$[1]=this.m01;$[2]=this.m02;$[3]=this.m03;return $};var tm={};tm.create=function(){return new mm(1,0,0,1)};tm.new=function(m,t,r,a){return new mm(m,t,r,a)};tm.clone=function(m){return new mm(m.m00,m.m01,m.m02,m.m03)};tm.copy=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m03;return m};tm.identity=function(m){m.m00=1;m.m01=0;m.m02=0;m.m03=1;return m};tm.set=function(m,t,r,a,n){m.m00=t;m.m01=r;m.m02=a;m.m03=n;return m};tm.transpose=function(m,t){if(m===t){var r=t.m01;m.m01=t.m02;m.m02=r}else{m.m00=t.m00;m.m01=t.m02;m.m02=t.m01;m.m03=t.m03}return m};tm.invert=function(m,t){var r=t.m00,a=t.m01,n=t.m02,u=t.m03;var e=r*u-n*a;if(!e){return null}e=1/e;m.m00=u*e;m.m01=-a*e;m.m02=-n*e;m.m03=r*e;return m};tm.adjoint=function(m,t){var r=t.m00;m.m00=t.m03;m.m01=-t.m01;m.m02=-t.m02;m.m03=r;return m};tm.determinant=function(m){return m.m00*m.m03-m.m02*m.m01};tm.multiply=function(m,t,r){var a=t.m00,n=t.m01,u=t.m02,e=t.m03;var i=r.m00,o=r.m01,s=r.m02,h=r.m03;m.m00=a*i+u*o;m.m01=n*i+e*o;m.m02=a*s+u*h;m.m03=n*s+e*h;return m};tm.mul=tm.multiply;tm.rotate=function(m,t,r){var a=t.m00,n=t.m01,u=t.m02,e=t.m03,i=Math.sin(r),o=Math.cos(r);m.m00=a*o+u*i;m.m01=n*o+e*i;m.m02=a*-i+u*o;m.m03=n*-i+e*o;return m};tm.scale=function(m,t,r){var a=t.m00,n=t.m01,u=t.m02,e=t.m03,i=r.x,o=r.y;m.m00=a*i;m.m01=n*i;m.m02=u*o;m.m03=e*o;return m};tm.fromRotation=function(m,t){var r=Math.sin(t),a=Math.cos(t);m.m00=a;m.m01=r;m.m02=-r;m.m03=a;return m};tm.fromScaling=function(m,t){m.m00=t.x;m.m01=0;m.m02=0;m.m03=t.y;return m};tm.str=function(m){return"mat2("+m.m00+", "+m.m01+", "+m.m02+", "+m.m03+")"};tm.array=function(m,t){m[0]=t.m00;m[1]=t.m01;m[2]=t.m02;m[3]=t.m03;return m};tm.frob=function(m){return Math.sqrt(Math.pow(m.m00,2)+Math.pow(m.m01,2)+Math.pow(m.m02,2)+Math.pow(m.m03,2))};tm.LDU=function(m,t,r,a){m.m02=a.m02/a.m00;r.m00=a.m00;r.m01=a.m01;r.m03=a.m03-m.m02*r.m01};tm.add=function(m,t,r){m.m00=t.m00+r.m00;m.m01=t.m01+r.m01;m.m02=t.m02+r.m02;m.m03=t.m03+r.m03;return m};tm.subtract=function(m,t,r){m.m00=t.m00-r.m00;m.m01=t.m01-r.m01;m.m02=t.m02-r.m02;m.m03=t.m03-r.m03;return m};tm.sub=tm.subtract;tm.exactEquals=function(m,t){return m.m00===t.m00&&m.m01===t.m01&&m.m02===t.m02&&m.m03===t.m03};tm.equals=function(m,t){var r=m.m00,n=m.m01,u=m.m02,e=m.m03;var i=t.m00,o=t.m01,s=t.m02,h=t.m03;return Math.abs(r-i)<=a*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=a*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(u-s)<=a*Math.max(1,Math.abs(u),Math.abs(s))&&Math.abs(e-h)<=a*Math.max(1,Math.abs(e),Math.abs(h))};tm.multiplyScalar=function(m,t,r){m.m00=t.m00*r;m.m01=t.m01*r;m.m02=t.m02*r;m.m03=t.m03*r;return m};tm.multiplyScalarAndAdd=function(m,t,r,a){m.m00=t.m00+r.m00*a;m.m01=t.m01+r.m01*a;m.m02=t.m02+r.m02*a;m.m03=t.m03+r.m03*a;return m};var rm=new Array(6);var am=function m(t,r,a,n,u,e){this.m00=t;this.m01=r;this.m02=a;this.m03=n;this.m04=u;this.m05=e};am.prototype.toJSON=function m(){rm[0]=this.m00;rm[1]=this.m01;rm[2]=this.m02;rm[3]=this.m03;rm[4]=this.m04;rm[5]=this.m05;return rm};var nm={};nm.create=function(){return new am(1,0,0,1,0,0)};nm.new=function(m,t,r,a,n,u){return new am(m,t,r,a,n,u)};nm.clone=function(m){return new am(m.m00,m.m01,m.m02,m.m03,m.m04,m.m05)};nm.copy=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m03;m.m04=t.m04;m.m05=t.m05;return m};nm.identity=function(m){m.m00=1;m.m01=0;m.m02=0;m.m03=1;m.m04=0;m.m05=0;return m};nm.set=function(m,t,r,a,n,u,e){m.m00=t;m.m01=r;m.m02=a;m.m03=n;m.m04=u;m.m05=e;return m};nm.invert=function(m,t){var r=t.m00,a=t.m01,n=t.m02,u=t.m03,e=t.m04,i=t.m05;var o=r*u-a*n;if(!o){return null}o=1/o;m.m00=u*o;m.m01=-a*o;m.m02=-n*o;m.m03=r*o;m.m04=(n*i-u*e)*o;m.m05=(a*e-r*i)*o;return m};nm.determinant=function(m){return m.m00*m.m03-m.m01*m.m02};nm.multiply=function(m,t,r){var a=t.m00,n=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=r.m00,h=r.m01,c=r.m02,f=r.m03,M=r.m04,x=r.m05;m.m00=a*s+u*h;m.m01=n*s+e*h;m.m02=a*c+u*f;m.m03=n*c+e*f;m.m04=a*M+u*x+i;m.m05=n*M+e*x+o;return m};nm.mul=nm.multiply;nm.rotate=function(m,t,r){var a=t.m00,n=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=Math.sin(r),h=Math.cos(r);m.m00=a*h+u*s;m.m01=n*h+e*s;m.m02=a*-s+u*h;m.m03=n*-s+e*h;m.m04=i;m.m05=o;return m};nm.scale=function(m,t,r){var a=t.m00,n=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=r.x,h=r.y;m.m00=a*s;m.m01=n*s;m.m02=u*h;m.m03=e*h;m.m04=i;m.m05=o;return m};nm.translate=function(m,t,r){var a=t.m00,n=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=r.x,h=r.y;m.m00=a;m.m01=n;m.m02=u;m.m03=e;m.m04=a*s+u*h+i;m.m05=n*s+e*h+o;return m};nm.fromRotation=function(m,t){var r=Math.sin(t),a=Math.cos(t);m.m00=a;m.m01=r;m.m02=-r;m.m03=a;m.m04=0;m.m05=0;return m};nm.fromScaling=function(m,t){m.m00=t.m00;m.m01=0;m.m02=0;m.m03=t.m01;m.m04=0;m.m05=0;return m};nm.fromTranslation=function(m,t){m.m00=1;m.m01=0;m.m02=0;m.m03=1;m.m04=t.x;m.m05=t.y;return m};nm.fromRTS=function(m,t,r,a){var n=Math.sin(t),u=Math.cos(t);m.m00=u*a.x;m.m01=n*a.x;m.m02=-n*a.y;m.m03=u*a.y;m.m04=r.x;m.m05=r.y;return m};nm.str=function(m){return"mat23("+m.m00+", "+m.m01+", "+m.m02+", "+m.m03+", "+m.m04+", "+m.m05+")"};nm.array=function(m,t){m[0]=t.m00;m[1]=t.m01;m[2]=t.m02;m[3]=t.m03;m[4]=t.m04;m[5]=t.m05;return m};nm.array4x4=function(m,t){m[0]=t.m00;m[1]=t.m01;m[2]=0;m[3]=0;m[4]=t.m02;m[5]=t.m03;m[6]=0;m[7]=0;m[8]=0;m[9]=0;m[10]=1;m[11]=0;m[12]=t.m04;m[13]=t.m05;m[14]=0;m[15]=1;return m};nm.frob=function(m){return Math.sqrt(Math.pow(m.m00,2)+Math.pow(m.m01,2)+Math.pow(m.m02,2)+Math.pow(m.m03,2)+Math.pow(m.m04,2)+Math.pow(m.m05,2)+1)};nm.add=function(m,t,r){m.m00=t.m00+r.m00;m.m01=t.m01+r.m01;m.m02=t.m02+r.m02;m.m03=t.m03+r.m03;m.m04=t.m04+r.m04;m.m05=t.m05+r.m05;return m};nm.subtract=function(m,t,r){m.m00=t.m00-r.m00;m.m01=t.m01-r.m01;m.m02=t.m02-r.m02;m.m03=t.m03-r.m03;m.m04=t.m04-r.m04;m.m05=t.m05-r.m05;return m};nm.sub=nm.subtract;nm.multiplyScalar=function(m,t,r){m.m00=t.m00*r;m.m01=t.m01*r;m.m02=t.m02*r;m.m03=t.m03*r;m.m04=t.m04*r;m.m05=t.m05*r;return m};nm.multiplyScalarAndAdd=function(m,t,r,a){m.m00=t.m00+r.m00*a;m.m01=t.m01+r.m01*a;m.m02=t.m02+r.m02*a;m.m03=t.m03+r.m03*a;m.m04=t.m04+r.m04*a;m.m05=t.m05+r.m05*a;return m};nm.exactEquals=function(m,t){return m.m00===t.m00&&m.m01===t.m01&&m.m02===t.m02&&m.m03===t.m03&&m.m04===t.m04&&m.m05===t.m05};nm.equals=function(m,t){var r=m.m00,n=m.m01,u=m.m02,e=m.m03,i=m.m04,o=m.m05;var s=t.m00,h=t.m01,c=t.m02,f=t.m03,M=t.m04,x=t.m05;return Math.abs(r-s)<=a*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-h)<=a*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(u-c)<=a*Math.max(1,Math.abs(u),Math.abs(c))&&Math.abs(e-f)<=a*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(i-M)<=a*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-x)<=a*Math.max(1,Math.abs(o),Math.abs(x))};var um=new Array(16);var em=function m(t,r,a,n,u,e,i,o,s,h,c,f,M,x,y,v){this.m00=t;this.m01=r;this.m02=a;this.m03=n;this.m04=u;this.m05=e;this.m06=i;this.m07=o;this.m08=s;this.m09=h;this.m10=c;this.m11=f;this.m12=M;this.m13=x;this.m14=y;this.m15=v};em.prototype.toJSON=function m(){um[0]=this.m00;um[1]=this.m01;um[2]=this.m02;um[3]=this.m03;um[4]=this.m04;um[5]=this.m05;um[6]=this.m06;um[7]=this.m07;um[8]=this.m08;um[9]=this.m09;um[10]=this.m10;um[11]=this.m11;um[12]=this.m12;um[13]=this.m13;um[14]=this.m14;um[15]=this.m15;return um};var im={};im.create=function(){return new em(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)};im.new=function(m,t,r,a,n,u,e,i,o,s,h,c,f,M,x,y){return new em(m,t,r,a,n,u,e,i,o,s,h,c,f,M,x,y)};im.clone=function(m){return new em(m.m00,m.m01,m.m02,m.m03,m.m04,m.m05,m.m06,m.m07,m.m08,m.m09,m.m10,m.m11,m.m12,m.m13,m.m14,m.m15)};im.copy=function(m,t){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m03;m.m04=t.m04;m.m05=t.m05;m.m06=t.m06;m.m07=t.m07;m.m08=t.m08;m.m09=t.m09;m.m10=t.m10;m.m11=t.m11;m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15;return m};im.set=function(m,t,r,a,n,u,e,i,o,s,h,c,f,M,x,y,v){m.m00=t;m.m01=r;m.m02=a;m.m03=n;m.m04=u;m.m05=e;m.m06=i;m.m07=o;m.m08=s;m.m09=h;m.m10=c;m.m11=f;m.m12=M;m.m13=x;m.m14=y;m.m15=v;return m};im.identity=function(m){m.m00=1;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=1;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=1;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};im.transpose=function(m,t){if(m===t){var r=t.m01,a=t.m02,n=t.m03,u=t.m06,e=t.m07,i=t.m11;m.m01=t.m04;m.m02=t.m08;m.m03=t.m12;m.m04=r;m.m06=t.m09;m.m07=t.m13;m.m08=a;m.m09=u;m.m11=t.m14;m.m12=n;m.m13=e;m.m14=i}else{m.m00=t.m00;m.m01=t.m04;m.m02=t.m08;m.m03=t.m12;m.m04=t.m01;m.m05=t.m05;m.m06=t.m09;m.m07=t.m13;m.m08=t.m02;m.m09=t.m06;m.m10=t.m10;m.m11=t.m14;m.m12=t.m03;m.m13=t.m07;m.m14=t.m11;m.m15=t.m15}return m};im.invert=function(m,t){var r=t.m00,a=t.m01,n=t.m02,u=t.m03,e=t.m04,i=t.m05,o=t.m06,s=t.m07,h=t.m08,c=t.m09,f=t.m10,M=t.m11,x=t.m12,y=t.m13,v=t.m14,l=t.m15;var b=r*i-a*e;var z=r*o-n*e;var w=r*s-u*e;var d=a*o-n*i;var p=a*s-u*i;var g=n*s-u*o;var q=h*y-c*x;var A=h*v-f*x;var S=h*l-M*x;var I=c*v-f*y;var L=c*l-M*y;var E=f*l-M*v;var P=b*E-z*L+w*I+d*S-p*A+g*q;if(!P){return null}P=1/P;m.m00=(i*E-o*L+s*I)*P;m.m01=(n*L-a*E-u*I)*P;m.m02=(y*g-v*p+l*d)*P;m.m03=(f*p-c*g-M*d)*P;m.m04=(o*S-e*E-s*A)*P;m.m05=(r*E-n*S+u*A)*P;m.m06=(v*w-x*g-l*z)*P;m.m07=(h*g-f*w+M*z)*P;m.m08=(e*L-i*S+s*q)*P;m.m09=(a*S-r*L-u*q)*P;m.m10=(x*p-y*w+l*b)*P;m.m11=(c*w-h*p-M*b)*P;m.m12=(i*A-e*I-o*q)*P;m.m13=(r*I-a*A+n*q)*P;m.m14=(y*z-x*d-v*b)*P;m.m15=(h*d-c*z+f*b)*P;return m};im.adjoint=function(m,t){var r=t.m00,a=t.m01,n=t.m02,u=t.m03,e=t.m04,i=t.m05,o=t.m06,s=t.m07,h=t.m08,c=t.m09,f=t.m10,M=t.m11,x=t.m12,y=t.m13,v=t.m14,l=t.m15;m.m00=i*(f*l-M*v)-c*(o*l-s*v)+y*(o*M-s*f);m.m01=-(a*(f*l-M*v)-c*(n*l-u*v)+y*(n*M-u*f));m.m02=a*(o*l-s*v)-i*(n*l-u*v)+y*(n*s-u*o);m.m03=-(a*(o*M-s*f)-i*(n*M-u*f)+c*(n*s-u*o));m.m04=-(e*(f*l-M*v)-h*(o*l-s*v)+x*(o*M-s*f));m.m05=r*(f*l-M*v)-h*(n*l-u*v)+x*(n*M-u*f);m.m06=-(r*(o*l-s*v)-e*(n*l-u*v)+x*(n*s-u*o));m.m07=r*(o*M-s*f)-e*(n*M-u*f)+h*(n*s-u*o);m.m08=e*(c*l-M*y)-h*(i*l-s*y)+x*(i*M-s*c);m.m09=-(r*(c*l-M*y)-h*(a*l-u*y)+x*(a*M-u*c));m.m10=r*(i*l-s*y)-e*(a*l-u*y)+x*(a*s-u*i);m.m11=-(r*(i*M-s*c)-e*(a*M-u*c)+h*(a*s-u*i));m.m12=-(e*(c*v-f*y)-h*(i*v-o*y)+x*(i*f-o*c));m.m13=r*(c*v-f*y)-h*(a*v-n*y)+x*(a*f-n*c);m.m14=-(r*(i*v-o*y)-e*(a*v-n*y)+x*(a*o-n*i));m.m15=r*(i*f-o*c)-e*(a*f-n*c)+h*(a*o-n*i);return m};im.determinant=function(m){var t=m.m00,r=m.m01,a=m.m02,n=m.m03,u=m.m04,e=m.m05,i=m.m06,o=m.m07,s=m.m08,h=m.m09,c=m.m10,f=m.m11,M=m.m12,x=m.m13,y=m.m14,v=m.m15;var l=t*e-r*u;var b=t*i-a*u;var z=t*o-n*u;var w=r*i-a*e;var d=r*o-n*e;var p=a*o-n*i;var g=s*x-h*M;var q=s*y-c*M;var A=s*v-f*M;var S=h*y-c*x;var I=h*v-f*x;var L=c*v-f*y;return l*L-b*I+z*S+w*A-d*q+p*g};im.multiply=function(m,t,r){var a=t.m00,n=t.m01,u=t.m02,e=t.m03,i=t.m04,o=t.m05,s=t.m06,h=t.m07,c=t.m08,f=t.m09,M=t.m10,x=t.m11,y=t.m12,v=t.m13,l=t.m14,b=t.m15;var z=r.m00,w=r.m01,d=r.m02,p=r.m03;m.m00=z*a+w*i+d*c+p*y;m.m01=z*n+w*o+d*f+p*v;m.m02=z*u+w*s+d*M+p*l;m.m03=z*e+w*h+d*x+p*b;z=r.m04;w=r.m05;d=r.m06;p=r.m07;m.m04=z*a+w*i+d*c+p*y;m.m05=z*n+w*o+d*f+p*v;m.m06=z*u+w*s+d*M+p*l;m.m07=z*e+w*h+d*x+p*b;z=r.m08;w=r.m09;d=r.m10;p=r.m11;m.m08=z*a+w*i+d*c+p*y;m.m09=z*n+w*o+d*f+p*v;m.m10=z*u+w*s+d*M+p*l;m.m11=z*e+w*h+d*x+p*b;z=r.m12;w=r.m13;d=r.m14;p=r.m15;m.m12=z*a+w*i+d*c+p*y;m.m13=z*n+w*o+d*f+p*v;m.m14=z*u+w*s+d*M+p*l;m.m15=z*e+w*h+d*x+p*b;return m};im.mul=im.multiply;im.translate=function(m,t,r){var a=r.x,n=r.y,u=r.z,e,i,o,s,h,c,f,M,x,y,v,l;if(t===m){m.m12=t.m00*a+t.m04*n+t.m08*u+t.m12;m.m13=t.m01*a+t.m05*n+t.m09*u+t.m13;m.m14=t.m02*a+t.m06*n+t.m10*u+t.m14;m.m15=t.m03*a+t.m07*n+t.m11*u+t.m15}else{e=t.m00;i=t.m01;o=t.m02;s=t.m03;h=t.m04;c=t.m05;f=t.m06;M=t.m07;x=t.m08;y=t.m09;v=t.m10;l=t.m11;m.m00=e;m.m01=i;m.m02=o;m.m03=s;m.m04=h;m.m05=c;m.m06=f;m.m07=M;m.m08=x;m.m09=y;m.m10=v;m.m11=l;m.m12=e*a+h*n+x*u+t.m12;m.m13=i*a+c*n+y*u+t.m13;m.m14=o*a+f*n+v*u+t.m14;m.m15=s*a+M*n+l*u+t.m15}return m};im.scale=function(m,t,r){var a=r.x,n=r.y,u=r.z;m.m00=t.m00*a;m.m01=t.m01*a;m.m02=t.m02*a;m.m03=t.m03*a;m.m04=t.m04*n;m.m05=t.m05*n;m.m06=t.m06*n;m.m07=t.m07*n;m.m08=t.m08*u;m.m09=t.m09*u;m.m10=t.m10*u;m.m11=t.m11*u;m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15;return m};im.rotate=function(m,t,r,n){var u=n.x,e=n.y,i=n.z;var o,s,h,c,f,M,x,y,v,l,b,z,w,d,p,g,q,A,S,I,L,E,P,D;var N=Math.sqrt(u*u+e*e+i*i);if(Math.abs(N)<a){return null}N=1/N;u*=N;e*=N;i*=N;o=Math.sin(r);s=Math.cos(r);h=1-s;c=t.m00;f=t.m01;M=t.m02;x=t.m03;y=t.m04;v=t.m05;l=t.m06;b=t.m07;z=t.m08;w=t.m09;d=t.m10;p=t.m11;g=u*u*h+s;q=e*u*h+i*o;A=i*u*h-e*o;S=u*e*h-i*o;I=e*e*h+s;L=i*e*h+u*o;E=u*i*h+e*o;P=e*i*h-u*o;D=i*i*h+s;m.m00=c*g+y*q+z*A;m.m01=f*g+v*q+w*A;m.m02=M*g+l*q+d*A;m.m03=x*g+b*q+p*A;m.m04=c*S+y*I+z*L;m.m05=f*S+v*I+w*L;m.m06=M*S+l*I+d*L;m.m07=x*S+b*I+p*L;m.m08=c*E+y*P+z*D;m.m09=f*E+v*P+w*D;m.m10=M*E+l*P+d*D;m.m11=x*E+b*P+p*D;if(t!==m){m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15}return m};im.rotateX=function(m,t,r){var a=Math.sin(r),n=Math.cos(r),u=t.m04,e=t.m05,i=t.m06,o=t.m07,s=t.m08,h=t.m09,c=t.m10,f=t.m11;if(t!==m){m.m00=t.m00;m.m01=t.m01;m.m02=t.m02;m.m03=t.m03;m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15}m.m04=u*n+s*a;m.m05=e*n+h*a;m.m06=i*n+c*a;m.m07=o*n+f*a;m.m08=s*n-u*a;m.m09=h*n-e*a;m.m10=c*n-i*a;m.m11=f*n-o*a;return m};im.rotateY=function(m,t,r){var a=Math.sin(r),n=Math.cos(r),u=t.m00,e=t.m01,i=t.m02,o=t.m03,s=t.m08,h=t.m09,c=t.m10,f=t.m11;if(t!==m){m.m04=t.m04;m.m05=t.m05;m.m06=t.m06;m.m07=t.m07;m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15}m.m00=u*n-s*a;m.m01=e*n-h*a;m.m02=i*n-c*a;m.m03=o*n-f*a;m.m08=u*a+s*n;m.m09=e*a+h*n;m.m10=i*a+c*n;m.m11=o*a+f*n;return m};im.rotateZ=function(m,t,r){var a=Math.sin(r),n=Math.cos(r),u=t.m00,e=t.m01,i=t.m02,o=t.m03,s=t.m04,h=t.m05,c=t.m06,f=t.m07;if(t!==m){m.m08=t.m08;m.m09=t.m09;m.m10=t.m10;m.m11=t.m11;m.m12=t.m12;m.m13=t.m13;m.m14=t.m14;m.m15=t.m15}m.m00=u*n+s*a;m.m01=e*n+h*a;m.m02=i*n+c*a;m.m03=o*n+f*a;m.m04=s*n-u*a;m.m05=h*n-e*a;m.m06=c*n-i*a;m.m07=f*n-o*a;return m};im.fromTranslation=function(m,t){m.m00=1;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=1;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=1;m.m11=0;m.m12=t.x;m.m13=t.y;m.m14=t.z;m.m15=1;return m};im.fromScaling=function(m,t){m.m00=t.x;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=t.y;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=t.z;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};im.fromRotation=function(m,t,r){var n=r.x,u=r.y,e=r.z;var i=Math.sqrt(n*n+u*u+e*e);var o,s,h;if(Math.abs(i)<a){return null}i=1/i;n*=i;u*=i;e*=i;o=Math.sin(t);s=Math.cos(t);h=1-s;m.m00=n*n*h+s;m.m01=u*n*h+e*o;m.m02=e*n*h-u*o;m.m03=0;m.m04=n*u*h-e*o;m.m05=u*u*h+s;m.m06=e*u*h+n*o;m.m07=0;m.m08=n*e*h+u*o;m.m09=u*e*h-n*o;m.m10=e*e*h+s;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};im.fromXRotation=function(m,t){var r=Math.sin(t),a=Math.cos(t);m.m00=1;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=a;m.m06=r;m.m07=0;m.m08=0;m.m09=-r;m.m10=a;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};im.fromYRotation=function(m,t){var r=Math.sin(t),a=Math.cos(t);m.m00=a;m.m01=0;m.m02=-r;m.m03=0;m.m04=0;m.m05=1;m.m06=0;m.m07=0;m.m08=r;m.m09=0;m.m10=a;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};im.fromZRotation=function(m,t){var r=Math.sin(t),a=Math.cos(t);m.m00=a;m.m01=r;m.m02=0;m.m03=0;m.m04=-r;m.m05=a;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=1;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};im.fromRT=function(m,t,r){var a=t.x,n=t.y,u=t.z,e=t.w;var i=a+a;var o=n+n;var s=u+u;var h=a*i;var c=a*o;var f=a*s;var M=n*o;var x=n*s;var y=u*s;var v=e*i;var l=e*o;var b=e*s;m.m00=1-(M+y);m.m01=c+b;m.m02=f-l;m.m03=0;m.m04=c-b;m.m05=1-(h+y);m.m06=x+v;m.m07=0;m.m08=f+l;m.m09=x-v;m.m10=1-(h+M);m.m11=0;m.m12=r.x;m.m13=r.y;m.m14=r.z;m.m15=1;return m};im.getTranslation=function(m,t){m.x=t.m12;m.y=t.m13;m.z=t.m14;return m};im.getScaling=function(m,t){var r=t.m00,a=t.m01,n=t.m02,u=t.m04,e=t.m05,i=t.m06,o=t.m08,s=t.m09,h=t.m10;m.x=Math.sqrt(r*r+a*a+n*n);m.y=Math.sqrt(u*u+e*e+i*i);m.z=Math.sqrt(o*o+s*s+h*h);return m};im.getRotation=function(m,t){var r=t.m00+t.m05+t.m10;var a=0;if(r>0){a=Math.sqrt(r+1)*2;m.w=.25*a;m.x=(t.m06-t.m09)/a;m.y=(t.m08-t.m02)/a;m.z=(t.m01-t.m04)/a}else if(t.m00>t.m05&t.m00>t.m10){a=Math.sqrt(1+t.m00-t.m05-t.m10)*2;m.w=(t.m06-t.m09)/a;m.x=.25*a;m.y=(t.m01+t.m04)/a;m.z=(t.m08+t.m02)/a}else if(t.m05>t.m10){a=Math.sqrt(1+t.m05-t.m00-t.m10)*2;m.w=(t.m08-t.m02)/a;m.x=(t.m01+t.m04)/a;m.y=.25*a;m.z=(t.m06+t.m09)/a}else{a=Math.sqrt(1+t.m10-t.m00-t.m05)*2;m.w=(t.m01-t.m04)/a;m.x=(t.m08+t.m02)/a;m.y=(t.m06+t.m09)/a;m.z=.25*a}return m};im.fromRTS=function(m,t,r,a){var n=t.x,u=t.y,e=t.z,i=t.w;var o=n+n;var s=u+u;var h=e+e;var c=n*o;var f=n*s;var M=n*h;var x=u*s;var y=u*h;var v=e*h;var l=i*o;var b=i*s;var z=i*h;var w=a.x;var d=a.y;var p=a.z;m.m00=(1-(x+v))*w;m.m01=(f+z)*w;m.m02=(M-b)*w;m.m03=0;m.m04=(f-z)*d;m.m05=(1-(c+v))*d;m.m06=(y+l)*d;m.m07=0;m.m08=(M+b)*p;m.m09=(y-l)*p;m.m10=(1-(c+x))*p;m.m11=0;m.m12=r.x;m.m13=r.y;m.m14=r.z;m.m15=1;return m};im.fromRTSOrigin=function(m,t,r,a,n){var u=t.x,e=t.y,i=t.z,o=t.w;var s=u+u;var h=e+e;var c=i+i;var f=u*s;var M=u*h;var x=u*c;var y=e*h;var v=e*c;var l=i*c;var b=o*s;var z=o*h;var w=o*c;var d=a.x;var p=a.y;var g=a.z;var q=n.x;var A=n.y;var S=n.z;m.m00=(1-(y+l))*d;m.m01=(M+w)*d;m.m02=(x-z)*d;m.m03=0;m.m04=(M-w)*p;m.m05=(1-(f+l))*p;m.m06=(v+b)*p;m.m07=0;m.m08=(x+z)*g;m.m09=(v-b)*g;m.m10=(1-(f+y))*g;m.m11=0;m.m12=r.x+q-(m.m00*q+m.m04*A+m.m08*S);m.m13=r.y+A-(m.m01*q+m.m05*A+m.m09*S);m.m14=r.z+S-(m.m02*q+m.m06*A+m.m10*S);m.m15=1;return m};im.fromQuat=function(m,t){var r=t.x,a=t.y,n=t.z,u=t.w;var e=r+r;var i=a+a;var o=n+n;var s=r*e;var h=a*e;var c=a*i;var f=n*e;var M=n*i;var x=n*o;var y=u*e;var v=u*i;var l=u*o;m.m00=1-c-x;m.m01=h+l;m.m02=f-v;m.m03=0;m.m04=h-l;m.m05=1-s-x;m.m06=M+y;m.m07=0;m.m08=f+v;m.m09=M-y;m.m10=1-s-c;m.m11=0;m.m12=0;m.m13=0;m.m14=0;m.m15=1;return m};im.frustum=function(m,t,r,a,n,u,e){var i=1/(r-t);var o=1/(n-a);var s=1/(u-e);m.m00=u*2*i;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=u*2*o;m.m06=0;m.m07=0;m.m08=(r+t)*i;m.m09=(n+a)*o;m.m10=(e+u)*s;m.m11=-1;m.m12=0;m.m13=0;m.m14=e*u*2*s;m.m15=0;return m};im.perspective=function(m,t,r,a,n){var u=1/Math.tan(t/2);var e=1/(a-n);m.m00=u/r;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=u;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=(n+a)*e;m.m11=-1;m.m12=0;m.m13=0;m.m14=2*n*a*e;m.m15=0;return m};im.perspectiveFromFieldOfView=function(m,t,r,a){var n=Math.tan(t.upDegrees*Math.PI/180);var u=Math.tan(t.downDegrees*Math.PI/180);var e=Math.tan(t.leftDegrees*Math.PI/180);var i=Math.tan(t.rightDegrees*Math.PI/180);var o=2/(e+i);var s=2/(n+u);m.m00=o;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=s;m.m06=0;m.m07=0;m.m08=-((e-i)*o*.5);m.m09=(n-u)*s*.5;m.m10=a/(r-a);m.m11=-1;m.m12=0;m.m13=0;m.m14=a*r/(r-a);m.m15=0;return m};im.ortho=function(m,t,r,a,n,u,e){var i=1/(t-r);var o=1/(a-n);var s=1/(u-e);m.m00=-2*i;m.m01=0;m.m02=0;m.m03=0;m.m04=0;m.m05=-2*o;m.m06=0;m.m07=0;m.m08=0;m.m09=0;m.m10=2*s;m.m11=0;m.m12=(t+r)*i;m.m13=(n+a)*o;m.m14=(e+u)*s;m.m15=1;return m};im.lookAt=function(m,t,r,n){var u,e,i,o,s,h,c,f,M,x;var y=t.x;var v=t.y;var l=t.z;var b=n.x;var z=n.y;var w=n.z;var d=r.x;var p=r.y;var g=r.z;if(Math.abs(y-d)<a&&Math.abs(v-p)<a&&Math.abs(l-g)<a){return im.identity(m)}c=y-d;f=v-p;M=l-g;x=1/Math.sqrt(c*c+f*f+M*M);c*=x;f*=x;M*=x;u=z*M-w*f;e=w*c-b*M;i=b*f-z*c;x=Math.sqrt(u*u+e*e+i*i);if(!x){u=0;e=0;i=0}else{x=1/x;u*=x;e*=x;i*=x}o=f*i-M*e;s=M*u-c*i;h=c*e-f*u;x=Math.sqrt(o*o+s*s+h*h);if(!x){o=0;s=0;h=0}else{x=1/x;o*=x;s*=x;h*=x}m.m00=u;m.m01=o;m.m02=c;m.m03=0;m.m04=e;m.m05=s;m.m06=f;m.m07=0;m.m08=i;m.m09=h;m.m10=M;m.m11=0;m.m12=-(u*y+e*v+i*l);m.m13=-(o*y+s*v+h*l);m.m14=-(c*y+f*v+M*l);m.m15=1;return m};im.str=function(m){return"mat4("+m.m00+", "+m.m01+", "+m.m02+", "+m.m03+", "+m.m04+", "+m.m05+", "+m.m06+", "+m.m07+", "+m.m08+", "+m.m09+", "+m.m10+", "+m.m11+", "+m.m12+", "+m.m13+", "+m.m14+", "+m.m15+")"};im.array=function(m,t){m[0]=t.m00;m[1]=t.m01;m[2]=t.m02;m[3]=t.m03;m[4]=t.m04;m[5]=t.m05;m[6]=t.m06;m[7]=t.m07;m[8]=t.m08;m[9]=t.m09;m[10]=t.m10;m[11]=t.m11;m[12]=t.m12;m[13]=t.m13;m[14]=t.m14;m[15]=t.m15;return m};im.frob=function(m){return Math.sqrt(Math.pow(m.m00,2)+Math.pow(m.m01,2)+Math.pow(m.m02,2)+Math.pow(m.m03,2)+Math.pow(m.m04,2)+Math.pow(m.m05,2)+Math.pow(m.m06,2)+Math.pow(m.m07,2)+Math.pow(m.m08,2)+Math.pow(m.m09,2)+Math.pow(m.m10,2)+Math.pow(m.m11,2)+Math.pow(m.m12,2)+Math.pow(m.m13,2)+Math.pow(m.m14,2)+Math.pow(m.m15,2))};im.add=function(m,t,r){m.m00=t.m00+r.m00;m.m01=t.m01+r.m01;m.m02=t.m02+r.m02;m.m03=t.m03+r.m03;m.m04=t.m04+r.m04;m.m05=t.m05+r.m05;m.m06=t.m06+r.m06;m.m07=t.m07+r.m07;m.m08=t.m08+r.m08;m.m09=t.m09+r.m09;m.m10=t.m10+r.m10;m.m11=t.m11+r.m11;m.m12=t.m12+r.m12;m.m13=t.m13+r.m13;m.m14=t.m14+r.m14;m.m15=t.m15+r.m15;return m};im.subtract=function(m,t,r){m.m00=t.m00-r.m00;m.m01=t.m01-r.m01;m.m02=t.m02-r.m02;m.m03=t.m03-r.m03;m.m04=t.m04-r.m04;m.m05=t.m05-r.m05;m.m06=t.m06-r.m06;m.m07=t.m07-r.m07;m.m08=t.m08-r.m08;m.m09=t.m09-r.m09;m.m10=t.m10-r.m10;m.m11=t.m11-r.m11;m.m12=t.m12-r.m12;m.m13=t.m13-r.m13;m.m14=t.m14-r.m14;m.m15=t.m15-r.m15;return m};im.sub=im.subtract;im.multiplyScalar=function(m,t,r){m.m00=t.m00*r;m.m01=t.m01*r;m.m02=t.m02*r;m.m03=t.m03*r;m.m04=t.m04*r;m.m05=t.m05*r;m.m06=t.m06*r;m.m07=t.m07*r;m.m08=t.m08*r;m.m09=t.m09*r;m.m10=t.m10*r;m.m11=t.m11*r;m.m12=t.m12*r;m.m13=t.m13*r;m.m14=t.m14*r;m.m15=t.m15*r;return m};im.multiplyScalarAndAdd=function(m,t,r,a){m.m00=t.m00+r.m00*a;m.m01=t.m01+r.m01*a;m.m02=t.m02+r.m02*a;m.m03=t.m03+r.m03*a;m.m04=t.m04+r.m04*a;m.m05=t.m05+r.m05*a;m.m06=t.m06+r.m06*a;m.m07=t.m07+r.m07*a;m.m08=t.m08+r.m08*a;m.m09=t.m09+r.m09*a;m.m10=t.m10+r.m10*a;m.m11=t.m11+r.m11*a;m.m12=t.m12+r.m12*a;m.m13=t.m13+r.m13*a;m.m14=t.m14+r.m14*a;m.m15=t.m15+r.m15*a;return m};im.exactEquals=function(m,t){return m.m00===t.m00&&m.m01===t.m01&&m.m02===t.m02&&m.m03===t.m03&&m.m04===t.m04&&m.m05===t.m05&&m.m06===t.m06&&m.m07===t.m07&&m.m08===t.m08&&m.m09===t.m09&&m.m10===t.m10&&m.m11===t.m11&&m.m12===t.m12&&m.m13===t.m13&&m.m14===t.m14&&m.m15===t.m15};im.equals=function(m,t){var r=m.m00,n=m.m01,u=m.m02,e=m.m03,i=m.m04,o=m.m05,s=m.m06,h=m.m07,c=m.m08,f=m.m09,M=m.m10,x=m.m11,y=m.m12,v=m.m13,l=m.m14,b=m.m15;var z=t.m00,w=t.m01,d=t.m02,p=t.m03,g=t.m04,q=t.m05,A=t.m06,S=t.m07,I=t.m08,L=t.m09,E=t.m10,P=t.m11,D=t.m12,N=t.m13,R=t.m14,O=t.m15;return Math.abs(r-z)<=a*Math.max(1,Math.abs(r),Math.abs(z))&&Math.abs(n-w)<=a*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(u-d)<=a*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(e-p)<=a*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(i-g)<=a*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(o-q)<=a*Math.max(1,Math.abs(o),Math.abs(q))&&Math.abs(s-A)<=a*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(h-S)<=a*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(c-I)<=a*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-L)<=a*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(M-E)<=a*Math.max(1,Math.abs(M),Math.abs(E))&&Math.abs(x-P)<=a*Math.max(1,Math.abs(x),Math.abs(P))&&Math.abs(y-D)<=a*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(v-N)<=a*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(l-R)<=a*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(b-O)<=a*Math.max(1,Math.abs(b),Math.abs(O))};var om=new Array(3);var sm=function m(t,r,a){this.r=t;this.g=r;this.b=a};sm.prototype.toJSON=function m(){om[0]=this.r;om[1]=this.g;om[2]=this.b;return om};var hm={};hm.create=function(){return new sm(1,1,1)};hm.new=function(m,t,r){return new sm(m,t,r)};hm.clone=function(m){return new sm(m.r,m.g,m.b,m.a)};hm.copy=function(m,t){m.r=t.r;m.g=t.g;m.b=t.b;return m};hm.set=function(m,t,r,a){m.r=t;m.g=r;m.b=a;return m};hm.fromHex=function(m,t){var r=(t>>16)/255;var a=(t>>8&255)/255;var n=(t&255)/255;m.r=r;m.g=a;m.b=n;return m};hm.add=function(m,t,r){m.r=t.r+r.r;m.g=t.g+r.g;m.b=t.b+r.b;return m};hm.subtract=function(m,t,r){m.r=t.r-r.r;m.g=t.g-r.g;m.b=t.b-r.b;return m};hm.sub=hm.subtract;hm.multiply=function(m,t,r){m.r=t.r*r.r;m.g=t.g*r.g;m.b=t.b*r.b;return m};hm.mul=hm.multiply;hm.divide=function(m,t,r){m.r=t.r/r.r;m.g=t.g/r.g;m.b=t.b/r.b;return m};hm.div=hm.divide;hm.scale=function(m,t,r){m.r=t.r*r;m.g=t.g*r;m.b=t.b*r;return m};hm.lerp=function(m,t,r,a){var n=t.r,u=t.g,e=t.b;m.r=n+a*(r.r-n);m.g=u+a*(r.g-u);m.b=e+a*(r.b-e);return m};hm.str=function(m){return"color3("+m.r+", "+m.g+", "+m.b+")"};hm.array=function(m,t){m[0]=t.r;m[1]=t.g;m[2]=t.b;return m};hm.exactEquals=function(m,t){return m.r===t.r&&m.g===t.g&&m.b===t.b};hm.equals=function(m,t){var r=m.r,n=m.g,u=m.b;var e=t.r,i=t.g,o=t.b;return Math.abs(r-e)<=a*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(n-i)<=a*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(u-o)<=a*Math.max(1,Math.abs(u),Math.abs(o))};hm.hex=function(m){return m.r*255<<16|m.g*255<<8|m.b*255};var cm=new Array(4);var fm=function m(t,r,a,n){this.r=t;this.g=r;this.b=a;this.a=n};fm.prototype.toJSON=function m(){cm[0]=this.r;cm[1]=this.g;cm[2]=this.b;cm[3]=this.a;return cm};var Mm={};Mm.create=function(){return new fm(1,1,1,1)};Mm.new=function(m,t,r,a){return new fm(m,t,r,a)};Mm.clone=function(m){return new fm(m.r,m.g,m.b,m.a)};Mm.copy=function(m,t){m.r=t.r;m.g=t.g;m.b=t.b;m.a=t.a;return m};Mm.set=function(m,t,r,a,n){m.r=t;m.g=r;m.b=a;m.a=n;return m};Mm.fromHex=function(m,t){var r=(t>>24)/255;var a=(t>>16&255)/255;var n=(t>>8&255)/255;var u=(t&255)/255;m.r=r;m.g=a;m.b=n;m.a=u;return m};Mm.add=function(m,t,r){m.r=t.r+r.r;m.g=t.g+r.g;m.b=t.b+r.b;m.a=t.a+r.a;return m};Mm.subtract=function(m,t,r){m.r=t.r-r.r;m.g=t.g-r.g;m.b=t.b-r.b;m.a=t.a-r.a;return m};Mm.sub=Mm.subtract;Mm.multiply=function(m,t,r){m.r=t.r*r.r;m.g=t.g*r.g;m.b=t.b*r.b;m.a=t.a*r.a;return m};Mm.mul=Mm.multiply;Mm.divide=function(m,t,r){m.r=t.r/r.r;m.g=t.g/r.g;m.b=t.b/r.b;m.a=t.a/r.a;return m};Mm.div=Mm.divide;Mm.scale=function(m,t,r){m.r=t.r*r;m.g=t.g*r;m.b=t.b*r;m.a=t.a*r;return m};Mm.lerp=function(m,t,r,a){var n=t.r,u=t.g,e=t.b,i=t.a;m.r=n+a*(r.r-n);m.g=u+a*(r.g-u);m.b=e+a*(r.b-e);m.a=i+a*(r.a-i);return m};Mm.str=function(m){return"color4("+m.r+", "+m.g+", "+m.b+", "+m.a+")"};Mm.array=function(m,t){m[0]=t.r;m[1]=t.g;m[2]=t.b;m[3]=t.a;return m};Mm.exactEquals=function(m,t){return m.r===t.r&&m.g===t.g&&m.b===t.b&&m.a===t.a};Mm.equals=function(m,t){var r=m.r,n=m.g,u=m.b,e=m.a;var i=t.r,o=t.g,s=t.b,h=t.a;return Math.abs(r-i)<=a*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=a*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(u-s)<=a*Math.max(1,Math.abs(u),Math.abs(s))&&Math.abs(e-h)<=a*Math.max(1,Math.abs(e),Math.abs(h))};Mm.hex=function(m){return(m.r*255<<24|m.g*255<<16|m.b*255<<8|m.a*255)>>>0};var xm=j;m.bits=xm;m.vec2=Z;m.vec3=Y;m.vec4=C;m.quat=K;m.mat2=tm;m.mat23=nm;m.mat3=B;m.mat4=im;m.color3=hm;m.color4=Mm;m.EPSILON=a;m.equals=n;m.approx=u;m.clamp=e;m.clamp01=i;m.lerp=o;m.toRadian=s;m.toDegree=h;m.random=c;m.randomRange=f;m.randomRangeInt=M;m.nextPow2=x;return m}({});
//# sourceMappingURL=vmath.min.js.map